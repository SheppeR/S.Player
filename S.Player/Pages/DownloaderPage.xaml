<modern:Page
    x:Class="S.Player.Pages.DownloaderPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:S.Player.Models"
    xmlns:modern="http://schemas.inkore.net/lib/ui/wpf/modern"
    Title="DownloaderPage"
    d:DesignHeight="450"
    d:DesignWidth="800"
    DataContext="{Binding DownloaderPage, Source={StaticResource Locator}}"
    mc:Ignorable="d">
    <modern:Page.Resources>
        <DataTemplate x:Key="DownloadLinkTemplate" DataType="{x:Type models:DownloadLinkModel}">

            <Grid
                Width="160"
                Height="220"
                HorizontalAlignment="Stretch"
                Background="#28292C">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <modern:TitleBarButton
                    x:Name="ButtonDelete"
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Height="30"
                    Margin="5"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Command="{Binding DeleteCommand}">
                    <modern:FontIcon
                        FontSize="14"
                        Foreground="Red"
                        Icon="{x:Static modern:SegoeFluentIcons.Delete}" />
                </modern:TitleBarButton>

                <Image
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Width="150"
                    Height="150"
                    Margin="5"
                    Source="{Binding Poster}" />
                <TextBlock
                    Grid.Row="1"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Margin="5,5,5,5"
                    Text="{Binding Title}"
                    TextTrimming="CharacterEllipsis" />
                <TextBlock
                    Grid.Row="2"
                    Grid.Column="1"
                    Margin="5,0,15,0"
                    HorizontalAlignment="Right"
                    Text="{Binding Time}" />
                <ProgressBar
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Margin="5,0,5,0"
                    VerticalAlignment="Bottom"
                    Maximum="100"
                    Minimum="0"
                    Value="{Binding Progress}" />
            </Grid>
        </DataTemplate>
    </modern:Page.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBox
            Margin="10"
            HorizontalAlignment="Stretch"
            Text="{Binding YoutubeLink}" />
        <Button
            Grid.Row="0"
            Grid.Column="1"
            Width="120"
            Margin="10"
            Command="{Binding LoadLinkCommand}"
            Content="DOWNLOAD" />
        <modern:GridView
            x:Name="BasicGridView"
            Grid.Row="1"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="10,30,10,10"
            IsItemClickEnabled="False"
            IsSelectionEnabled="False"
            ItemTemplate="{StaticResource DownloadLinkTemplate}"
            ItemsSource="{Binding LinkList}">
            <modern:GridView.ItemContainerStyle>
                <Style TargetType="modern:GridViewItem">
                    <Setter Property="Margin" Value="8" />
                </Style>
            </modern:GridView.ItemContainerStyle>
        </modern:GridView>
    </Grid>
</modern:Page>