<Window
    x:Class="S.Player.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:pages="clr-namespace:S.Player.Pages"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    Width="1150"
    Height="650"
    d:Background="#202020"
    ui:TitleBar.ExtendViewIntoTitleBar="True"
    ui:TitleBar.Height="36"
    ui:TitleBar.Style="{DynamicResource AppTitleBarStyle}"
    ui:WindowHelper.ApplyBackground="True"
    ui:WindowHelper.CornerStyle="DoNotRound"
    ui:WindowHelper.SystemBackdropType="Mica"
    ui:WindowHelper.UseModernWindowStyle="True"
    DataContext="{Binding MainWindow, Source={StaticResource Locator}}"
    ResizeMode="CanResizeWithGrip"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Window.Resources>

        <Style TargetType="ui:TitleBarButton">
            <Setter Property="IsActive"
                    Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}, Path=IsActive}" />
        </Style>

    </Window.Resources>


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Image
            x:Name="BgImage"
            Grid.Row="0"
            Grid.RowSpan="3"
            Panel.ZIndex="0"
            IsHitTestVisible="False"
            Opacity="0.5"
            Stretch="UniformToFill">
            <Image.Style>
                <Style TargetType="Image">
                    <Setter Property="Source" Value="pack://application:,,,/Assets/bg-light.png" />
                    <Style.Triggers>
                        <DataTrigger
                            Binding="{Binding Source={x:Static ui:ThemeManager.Current}, Path=ActualApplicationTheme}"
                            Value="Dark">
                            <Setter Property="Source" Value="pack://application:,,,/Assets/bg-dark.png" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Image.Style>
        </Image>


        <ui:NavigationView
            x:Name="NavigationView"
            Grid.Row="1"
            Margin="10,0,0,0"

            BackRequested="OnBackRequested"
            Canvas.ZIndex="5"
            IsBackButtonVisible="Auto"
            IsBackEnabled="True"
            IsFooterSeparatorVisible="{x:Null}"
            IsPaneOpen="False"
            IsSettingsVisible="True"
            IsTabStop="False"
            IsTitleBarAutoPaddingEnabled="False"
            PaneDisplayMode="Top"
            PaneTitle="S.Player"
            SelectionChanged="OnSelectionChanged">
            <FrameworkElement.Resources>
                <SolidColorBrush x:Key="{x:Static ui:ThemeKeys.NavigationViewContentBackgroundKey}" Color="Transparent" />
                <SolidColorBrush x:Key="{x:Static ui:ThemeKeys.ExpanderHeaderBorderBrushKey}" Color="Transparent" />
                <Thickness x:Key="NavigationViewContentGridBorderThickness">0,0,0,0</Thickness>
            </FrameworkElement.Resources>
            <ui:NavigationView.MenuItems>
                <ui:NavigationViewItem
                    x:Name="HomePage"
                    Content="{Tr MainMenuHome}"
                    FontSize="24"
                    Tag="{x:Type pages:HomePage}">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Icon="{x:Static ui:SegoeFluentIcons.Home}" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>

                <ui:NavigationViewItem
                    x:Name="DownloaderPage"
                    Content="{Tr MainMenuApps}"
                    FontSize="24"
                    Tag="{x:Type pages:DownloaderPage}">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Icon="{x:Static ui:SegoeFluentIcons.Game}" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
            </ui:NavigationView.MenuItems>
            <ui:Frame x:Name="NavigationFrame" Padding="30,0" />
        </ui:NavigationView>
        <Border
            x:Name="Border_TitleBarRoot"
            Grid.Row="0"
            Height="50"
            Canvas.ZIndex="998">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <ikw:SimpleStackPanel
                    x:Name="StackPanel_RightButtons"
                    Grid.Column="1"
                    Margin="0,0,10,0"
                    Orientation="Horizontal"
                    Spacing="5">
                    <ui:TitleBarButton x:Name="ButtonBackward">
                        <ui:FontIcon FontSize="14" Icon="{x:Static ui:SegoeFluentIcons.Previous}" />
                    </ui:TitleBarButton>
                    <ui:TitleBarButton x:Name="ButtonStop">
                        <ui:FontIcon FontSize="14" Icon="{x:Static ui:SegoeFluentIcons.Stop}" />
                    </ui:TitleBarButton>
                    <ui:TitleBarButton x:Name="ButtonPlay">
                        <ui:FontIcon FontSize="22" Icon="{x:Static ui:SegoeFluentIcons.Play}" />
                    </ui:TitleBarButton>
                    <ui:TitleBarButton x:Name="ButtonForward">
                        <ui:FontIcon FontSize="14" Icon="{x:Static ui:SegoeFluentIcons.Next}" />
                    </ui:TitleBarButton>

                </ikw:SimpleStackPanel>
                <ikw:SimpleStackPanel
                    Grid.Column="2"
                    Margin="60,0,0,0"
                    Orientation="Horizontal"
                    Spacing="5">
                    <ui:TitleBarButton x:Name="ButtonAbout">
                        <ui:FontIcon FontSize="10" Icon="{x:Static ui:SegoeFluentIcons.Info}" />
                    </ui:TitleBarButton>
                    <ui:TitleBarButton x:Name="ButtonHelp">
                        <ui:FontIcon FontSize="10" Icon="{x:Static ui:SegoeFluentIcons.Help}" />
                    </ui:TitleBarButton>
                </ikw:SimpleStackPanel>

                <Rectangle Grid.Column="3"
                           Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}, Path=(ui:TitleBar.SystemOverlayRightInset)}" />
            </Grid>
        </Border>

        <ui:InfoBar
            x:Name="InfoBar"
            Grid.Row="2"
            Margin="10"
            HorizontalAlignment="Center"
            VerticalAlignment="Bottom"
            Canvas.ZIndex="999"
            IsClosable="True"
            IsIconVisible="True" />
        <Grid Grid.Row="2" HorizontalAlignment="Left">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock
                Grid.Row="0"
                Grid.Column="0"
                Margin="15,10,5,5"
                FontSize="46"
                Foreground="{DynamicResource {x:Static ui:ThemeKeys.SystemControlForegroundAccentBrushKey}}"
                Text="{Binding DateNumber}" />
            <StackPanel
                Grid.Column="1"
                Margin="5,10,5,12"
                VerticalAlignment="Bottom">
                <TextBlock FontSize="16" Text="{Binding DateMonth}" />
                <TextBlock FontSize="16" Text="{Binding DateDay}" />
            </StackPanel>
        </Grid>
        <Grid Grid.Row="2" HorizontalAlignment="Right">
            <TextBlock
                Margin="5,40,15,5"
                FontSize="20"
                Foreground="{DynamicResource {x:Static ui:ThemeKeys.SystemControlForegroundAccentBrushKey}}"
                Text="{Binding ClockTime}" />
        </Grid>
    </Grid>
</Window>